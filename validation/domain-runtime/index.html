
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="SQLAlchemy-first, typed representation of the OMOP Common Data Model">
      
      
      
        <link rel="canonical" href="https://AustralianCancerDataNetwork.github.io/OMOP_Alchemy/validation/domain-runtime/">
      
      
        <link rel="prev" href="../domain-rules/">
      
      
        <link rel="next" href="../../advanced/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Domain Rule Runtime - OMOP Alchemy</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#domain-runtime-validation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OMOP Alchemy" class="md-header__button md-logo" aria-label="OMOP Alchemy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OMOP Alchemy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Domain Rule Runtime
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/AustralianCancerDataNetwork/OMOP_Alchemy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    OMOP_Alchemy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OMOP Alchemy" class="md-nav__button md-logo" aria-label="OMOP Alchemy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    OMOP Alchemy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AustralianCancerDataNetwork/OMOP_Alchemy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    OMOP_Alchemy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/sessions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sessions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CDM Base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/columns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Columns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Relationships
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Object-Relational Mappings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Object-Relational Mappings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CDM Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    OMOP-Specific Validation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    OMOP-Specific Validation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain-rules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Domain Rule Runtime
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Rule Runtime
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#domain-validation-is-advisory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain validation is advisory
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domainvalidationmixin" class="md-nav__link">
    <span class="md-ellipsis">
      
        DomainValidationMixin
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DomainValidationMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin" class="md-nav__link">
    <span class="md-ellipsis">
      
        DomainValidationMixin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.domain_violations" class="md-nav__link">
    <span class="md-ellipsis">
      
        domain_violations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.is_domain_valid" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_domain_valid
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.collect_domain_rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        collect_domain_rules
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runtime-checking-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Runtime checking behavior
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example usage
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-happens-under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      
        What happens under the hood
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-not-to-use-runtime-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        When not to use runtime validation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When not to use runtime validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-an-object-level-approach-helps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why an object-level approach helps
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/views/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Views & Analytics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/timelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Timelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/query_patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Querying Tips
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#domain-validation-is-advisory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain validation is advisory
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domainvalidationmixin" class="md-nav__link">
    <span class="md-ellipsis">
      
        DomainValidationMixin
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DomainValidationMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin" class="md-nav__link">
    <span class="md-ellipsis">
      
        DomainValidationMixin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.domain_violations" class="md-nav__link">
    <span class="md-ellipsis">
      
        domain_violations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.is_domain_valid" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_domain_valid
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.collect_domain_rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        collect_domain_rules
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runtime-checking-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Runtime checking behavior
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example usage
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-happens-under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      
        What happens under the hood
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-not-to-use-runtime-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        When not to use runtime validation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When not to use runtime validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-an-object-level-approach-helps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why an object-level approach helps
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Home
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../" class="md-path__link">
          
  <span class="md-ellipsis">
    OMOP-Specific Validation
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="domain-runtime-validation">Domain Runtime Validation<a class="headerlink" href="#domain-runtime-validation" title="Permanent link">&para;</a></h1>
<p>Runtime domain validation provides <strong>best-effort semantic checks</strong>
on OMOP objects during interactive or analytical use.</p>
<p>These checks answer a simple but critical question:</p>
<blockquote>
<p>“Does this object reference concepts from the domains it claims to?”</p>
</blockquote>
<hr />
<h2 id="domain-validation-is-advisory">Domain validation is advisory<a class="headerlink" href="#domain-validation-is-advisory" title="Permanent link">&para;</a></h2>
<p>Runtime validation in OMOP Alchemy is:</p>
<ul>
<li>non-blocking</li>
<li>non-mutating</li>
<li>safe to run interactively</li>
<li>safe to skip entirely</li>
</ul>
<p>It is designed to <em>surface issues</em>, not enforce policy.</p>
<p>This makes it suitable for:</p>
<ul>
<li>notebooks</li>
<li>exploratory analysis</li>
<li>cohort debugging</li>
<li>governance and QA workflows</li>
</ul>
<hr />
<h2 id="domainvalidationmixin"><code>DomainValidationMixin</code><a class="headerlink" href="#domainvalidationmixin" title="Permanent link">&para;</a></h2>
<p>Domain runtime validation is provided via <code>DomainValidationMixin</code>,
which is intended for <strong>View classes only</strong>.</p>


<div class="doc doc-object doc-class">



<a id="omop_alchemy.cdm.base.domain_validation.DomainValidationMixin"></a>
    <div class="doc doc-contents first">



        <p><em>DomainValidationMixin</em></p>
<p>Adds lightweight runtime domain validation to OMOP View classes.</p>
<p>This mixin enables best-effort semantic checks that verify whether
referenced concept IDs belong to expected OMOP domains.</p>
<p>Validation is advisory:</p>
<ul>
<li>no exceptions are raised</li>
<li>no data is mutated</li>
<li>detached objects are handled safely</li>
</ul>
<p>Intended for <em>View classes only</em>.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Specification on a View:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">PersonView</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">DomainValidationMixin</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">__expected_domains__</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;gender_concept_id&quot;</span><span class="p">:</span> <span class="n">ExpectedDomain</span><span class="p">(</span><span class="s2">&quot;Gender&quot;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;race_concept_id&quot;</span><span class="p">:</span> <span class="n">ExpectedDomain</span><span class="p">(</span><span class="s2">&quot;Race&quot;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;ethnicity_concept_id&quot;</span><span class="p">:</span> <span class="n">ExpectedDomain</span><span class="p">(</span><span class="s2">&quot;Ethnicity&quot;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">}</span>
</code></pre></div>
    <p>Runtime usage:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">PersonView</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">is_domain_valid</span>
<span class="go">True</span>
</code></pre></div>
    <p>Violations can be inspected without raising exceptions:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">domain_violations</span>
<span class="go">[&quot;gender_concept_id not in domain(s): [&#39;Gender&#39;]&quot;]</span>
</code></pre></div>











<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.domain_violations" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">domain_violations</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.domain_violations" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">domain_violations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Human-readable descriptions of domain violations on this object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.is_domain_valid" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_domain_valid</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.is_domain_valid" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_domain_valid</span><span class="p">:</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Whether this object satisfies all declared domain expectations.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.collect_domain_rules" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">collect_domain_rules</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#omop_alchemy.cdm.base.domain_validation.DomainValidationMixin.collect_domain_rules" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">collect_domain_rules</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">DomainRule</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Collect declared domain expectations as canonical DomainRule objects.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="omop_alchemy.cdm.base.domain_validation.DomainRule" href="../domain-rules/#omop_alchemy.cdm.base.domain_validation.DomainRule">DomainRule</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Domain rules derived from <code>__expected_domains__</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div><p>The mixin relies on:</p>
<ul>
<li>declared expectations</li>
<li>an active SQLAlchemy session (if available)</li>
<li>the OMOP <code>Concept</code> table</li>
</ul>
<hr />
<h2 id="runtime-checking-behavior">Runtime checking behavior<a class="headerlink" href="#runtime-checking-behavior" title="Permanent link">&para;</a></h2>
<p>At runtime, domain validation:</p>
<ul>
<li>resolves referenced concept IDs</li>
<li>checks their <code>domain_id</code></li>
<li>compares against expected domains</li>
<li>reports violations as human-readable messages</li>
</ul>
<p>OMOP conventions are respected:</p>
<ul>
<li><code>concept_id = 0</code> is always treated as valid</li>
<li>detached objects are handled safely</li>
</ul>
<hr />
<h2 id="example-usage">Example usage<a class="headerlink" href="#example-usage" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">p</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">PersonView</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">is_domain_valid</span>
</code></pre></div>
<p>Returns <code>True</code> or <code>False</code>.</p>
<p>To inspect violations directly:</p>
<div class="highlight"><pre><span></span><code><span class="n">p</span><span class="o">.</span><span class="n">domain_violations</span>
</code></pre></div>
<p>Example output:</p>
<div class="highlight"><pre><span></span><code>[
  &quot;gender_concept_id not in domain(s): [&#39;Gender&#39;]&quot;
]
</code></pre></div>
<hr />
<h2 id="what-happens-under-the-hood">What happens under the hood<a class="headerlink" href="#what-happens-under-the-hood" title="Permanent link">&para;</a></h2>
<p>For each declared field:</p>
<ol>
<li>The referenced <code>concept_id</code> is retrieved</li>
<li>The corresponding Concept row is resolved</li>
<li>The concept’s <code>domain_id</code> is compared</li>
<li>Violations are accumulated, not raised</li>
</ol>
<hr />
<h2 id="when-not-to-use-runtime-validation">When <em>not</em> to use runtime validation<a class="headerlink" href="#when-not-to-use-runtime-validation" title="Permanent link">&para;</a></h2>
<p>Runtime validation is not a substitute for:</p>
<ul>
<li>ETL quality checks</li>
<li>database constraints</li>
<li>DataQualityDashboard or similar systematic QA tooling</li>
</ul>
<p>Those tools operate at a different layer, with different goals. It complements those tools by operating at the <strong>model and object layer</strong>.</p>
<blockquote>
<p>“Does this object, <em>in this analytical context</em>, behave the way I think it does?”</p>
</blockquote>
<p>That’s a much more local question, and one that usually arises:</p>
<ul>
<li>during exploration</li>
<li>while building derived views</li>
<li>or when debugging unexpected analytical results</li>
</ul>
<p>i.e. not asking whether the database as a whole is valid but trying to understand whether the meaning of what you’re looking at holds.</p>
<h3 id="why-an-object-level-approach-helps">Why an object-level approach helps<a class="headerlink" href="#why-an-object-level-approach-helps" title="Permanent link">&para;</a></h3>
<p>Many semantic problems don’t show up cleanly in ETL or database checks:</p>
<ul>
<li>a view joins concept IDs that are technically valid but conceptually incompatible</li>
<li>a derived cohort quietly mixes domains in a way that undermines interpretation</li>
<li>a field is populated, but with concepts that don’t make sense for this specific use</li>
</ul>
<p>Custom DQD checks expressed in SQL can handle these local constraints requiring additional context, however these issues are often easiest to spot when you’re already holding the data in your hands. Runtime validation takes advantage of object mappings to support that task by making expectations explicit and inspectable.</p>
<ul>
<li>DQD establishes baseline trust in the dataset</li>
<li>OMOP Alchemy helps maintain semantic clarity during analytical work</li>
</ul>
<h3 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h3>
<p>...come back soon for LinkML support</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.expand", "navigation.path", "navigation.top", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
      
        <script src="../../js/mermaid-init.js"></script>
      
    
  </body>
</html>